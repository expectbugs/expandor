version: '2.0'
core:
  default_strategy: auto
  quality_preset: balanced
  strategy: auto
  denoising_strength: 0.7
  guidance_scale: 7.5
  num_inference_steps: 30
quality_presets:
  custom:
    name: Custom Settings
    description: Base default values - used when no preset selected
    priority: 0
    generation:
      num_inference_steps: 30
      guidance_scale: 7.5
      scheduler: EulerAncestralDiscreteScheduler
      use_karras_sigmas: false
    resolution:
      prefer_native: true
      upscale_method: real-esrgan
      upscale_denoise: 0.2
    expansion:
      denoising_strength: 0.7
      mask_blur_ratio: 0.4
      overlap_ratio: 0.7
      edge_blend_pixels: 96
    validation:
      enable_artifact_detection: true
      artifact_threshold: 0.1
      enable_seam_detection: true
      seam_threshold: 0.1
      max_repair_attempts: 3
    performance:
      enable_xformers: true
      enable_cpu_offload: false
      tile_processing: false
      batch_size: 1
    models:
      prefer_refiner: false
      refiner_strength: 0.3
      controlnet_strength: 0.25
    output:
      format: png
      compression: 0
      save_intermediate: false
    json:
      indent: 2
      sort_keys: false
      ensure_ascii: false
  ultra:
    name: Ultra Quality
    description: Highest quality with maximum processing time
    priority: 4
    generation:
      num_inference_steps: 50
      guidance_scale: 8.0
      scheduler: EulerAncestralDiscreteScheduler
      use_karras_sigmas: true
    resolution:
      prefer_native: true
      upscale_method: real-esrgan
      upscale_denoise: 0.2
    expansion:
      denoising_strength: 0.7
      mask_blur_ratio: 0.5
      overlap_ratio: 0.85
      edge_blend_pixels: 128
    validation:
      enable_artifact_detection: true
      artifact_threshold: 0.1
      enable_seam_detection: true
      seam_threshold: 0.05
      max_repair_attempts: 5
    performance:
      enable_xformers: true
      enable_cpu_offload: false
      tile_processing: false
      batch_size: 1
    models:
      prefer_refiner: true
      refiner_strength: 0.3
      controlnet_strength: 0.25
    output:
      format: png
      compression: 0
      save_intermediate: true
    json:
      indent: 2
      sort_keys: false
      ensure_ascii: false
  high:
    name: High Quality
    description: Excellent quality with good performance balance
    priority: 3
    generation:
      num_inference_steps: 50
      guidance_scale: 7.5
      scheduler: EulerAncestralDiscreteScheduler
      use_karras_sigmas: true
    resolution:
      prefer_native: true
      upscale_method: real-esrgan
      upscale_denoise: 0.3
    expansion:
      denoising_strength: 0.65
      mask_blur_ratio: 0.4
      overlap_ratio: 0.75
      edge_blend_pixels: 96
    validation:
      enable_artifact_detection: true
      artifact_threshold: 0.2
      enable_seam_detection: true
      seam_threshold: 0.1
      max_repair_attempts: 3
    performance:
      enable_xformers: true
      enable_cpu_offload: false
      tile_processing: false
      batch_size: 1
    models:
      prefer_refiner: true
      refiner_strength: 0.25
      controlnet_strength: 0.35
    output:
      format: png
      compression: 3
      save_intermediate: false
    json:
      indent: 2
      sort_keys: false
      ensure_ascii: false
  balanced:
    name: Balanced Quality
    description: Good quality with reasonable processing time
    priority: 2
    generation:
      num_inference_steps: 35
      guidance_scale: 7.0
      scheduler: EulerDiscreteScheduler
      use_karras_sigmas: false
    resolution:
      prefer_native: false
      upscale_method: bicubic
      upscale_denoise: 0.0
    expansion:
      denoising_strength: 0.6
      mask_blur_ratio: 0.35
      overlap_ratio: 0.6
      edge_blend_pixels: 64
    validation:
      enable_artifact_detection: true
      artifact_threshold: 0.3
      enable_seam_detection: false
      seam_threshold: 0.15
      max_repair_attempts: 2
    performance:
      enable_xformers: true
      enable_cpu_offload: true
      tile_processing: true
      batch_size: 2
    models:
      prefer_refiner: false
      refiner_strength: 0.2
      controlnet_strength: 0.5
    output:
      format: png
      compression: 6
      save_intermediate: false
    json:
      indent: 2
      sort_keys: false
      ensure_ascii: false
  fast:
    name: Fast Processing
    description: Fastest processing with acceptable quality
    priority: 1
    generation:
      num_inference_steps: 20
      guidance_scale: 6.0
      scheduler: DDIMScheduler
      use_karras_sigmas: false
    resolution:
      prefer_native: false
      upscale_method: bilinear
      upscale_denoise: 0.0
    expansion:
      denoising_strength: 0.65
      mask_blur_ratio: 0.25
      overlap_ratio: 0.4
      edge_blend_pixels: 32
    validation:
      enable_artifact_detection: false
      artifact_threshold: 0.5
      enable_seam_detection: false
      seam_threshold: 0.25
      max_repair_attempts: 0
    performance:
      enable_xformers: true
      enable_cpu_offload: true
      tile_processing: true
      batch_size: 4
    models:
      prefer_refiner: false
      refiner_strength: 0.0
      controlnet_strength: 0.5
    output:
      format: jpeg
      compression: 85
      save_intermediate: false
    json:
      indent: 2
      sort_keys: false
      ensure_ascii: false
quality_global:
  default_preset: custom
  auto_select:
    enabled: true
    rules:
    - condition: resolution > 4096
      preset: fast
    - condition: aspect_ratio_change > 4
      preset: high
    - condition: vram_available < 4000
      preset: fast
  adaptive_quality:
    enabled: true
    min_steps: 15
    max_steps: 100
    vram_scaling: true
  validation:
    always_validate_ultra: true
    skip_validation_on_error: false
  output:
    preserve_metadata: true
    optimize_filesize: false
    max_dimension: 16384
constants:
  image:
    max_rgb_value: 255
    rgb_float_max: 255.0
    default_jpeg_quality: 95
    default_png_compression: 9
  cli:
    default_confirm: false
    default_must_exist: false
    default_create: false
    default_path_type: auto
    default_verbose: true
    default_dry_run: false
  watermark:
    height: 40
    width: 120
    opacity: 0.5
    text_top: 10
    text_bottom: 30
    text_left: 10
    text_right: 110
    text_brightness: 100
  dimensions:
    byte_conversion_factor: 1048576  # 1024 * 1024
    vae_downscale_factor: 8
    default_tile_size: 512
    min_dimension: 64
    max_dimension: 8192
    alignment_multiple: 8
    max_aspect_ratio: 10.0  # Maximum allowed aspect ratio
  processing:
    default_blur_radius: 50
    default_noise_strength: 0.02
    epsilon: 1e-8
    default_guidance_scale: 7.5
    default_num_steps: 50
    default_strength: 0.8
    noise_scale_factor: 10
    gaussian_sigma_divisor: 4.0
  memory:
    default_aggressive_clear: false
    default_clear_on_exit: true
    default_safety_factor: 1.2
    default_batch_safety_factor: 0.8
    default_max_batch_size: 16
    default_include_gradients: true
    default_bytes_per_pixel: 12.0
    default_tile_overlap: 64
    default_min_tile_size: 256
    default_max_tile_size: 2048
    default_scope_name: operation
    default_dtype: float32
    processing_overhead_multiplier: 2
  strategies:
    default_keep_last_temp_files: 5
  # Common dimensions and sizes
  common_dimensions:
    tile_sizes: [512, 768, 1024, 1344, 1536]
    standard_widths: [512, 768, 1024, 1280, 1920, 2560, 3840, 7680]
    standard_heights: [512, 768, 1024, 1080, 1440, 2160, 4320]
    sd_base: 512
    sd_medium: 768
    sdxl_base: 1024
    hd_720: 1280
    sdxl_high: 1536
    fhd: 1920
    qhd: 2560
    4k: 3840
    8k: 7680
  # Strength and weight values
  processing_strengths:
    very_low: 0.1
    low: 0.2
    medium_low: 0.3
    medium: 0.5
    medium_high: 0.7
    high: 0.8
    very_high: 0.9
  # Guidance scales
  guidance_scales:
    low: 6.0
    medium_low: 6.5
    medium: 7.0
    medium_high: 7.5
    high: 8.0
  # Inference steps
  inference_steps:
    fast: 25
    quick: 30
    balanced: 40
    quality: 50
    high_quality: 60
    ultra_quality: 80
  # Quality and percentage values
  quality:
    high_threshold: 90
  # Processing limits and counts
  processing:
    max_retries: 3
  # Expansion parameters
  expansion:
    max_expansion_per_step: 2.0
    aspect_change_threshold: 0.05
    max_aspect_ratio_change: 8.0
    initial_expansion_factor: 2.0
    middle_expansion_factor: 1.5
    completion_threshold: 0.95
  # Memory and performance
  memory:
    bytes_per_mb: 1048576  # 1024 * 1024
    bytes_per_gb: 1073741824  # 1024 * 1024 * 1024
    cache_sizes: [8, 16, 32, 64, 128, 256, 512]
    batch_sizes: [1, 2, 4, 8, 16]
quality_thresholds:
  seam_detection_threshold: 0.1
  texture_corruption_threshold: 0.15
  artifact_threshold: 0.1
  min_quality_score: 0.7
  max_quality_issues: 10
  edge_coefficient: 0.3  # ADD THIS - weight for edge quality
  resolution_coefficient: 0.5  # ADD THIS - weight for resolution quality
  artifact_weight: 0.4  # ADD THIS - weight for artifact detection
  sharpness_threshold: 0.7  # ADD THIS - minimum sharpness score
strategies:
  progressive_outpaint:
    first_step_ratio: 1.4
    middle_step_ratio: 1.25
    final_step_ratio: 1.15
    base_mask_blur: 32
    base_steps: 60
    max_supported_ratio: 8.0
    base_strength: 0.75
    decay_factor: 0.95  # ADD THIS - strength decay between steps
    min_strength: 0.35
    max_strength: 0.85
    seam_repair_multiplier: 0.4
    blur_radius_ratio: 0.4
    mask_blur_ratio: 0.05
    edge_preservation_ratio: 0.1
    outpaint_prompt_suffix: ', seamless expansion, extended scenery, natural continuation'
    edge_sample_width: 50
    aspect_ratio_thresholds:
      minimal: 0.1
      moderate: 0.3
      significant: 1.0
      extreme: 4.0
    color_variance_uniform_threshold: 20
    monochrome_threshold: 10
    brightness_dark_threshold: 0.3
    brightness_bright_threshold: 0.7
    contrast_high_threshold: 0.3
    edge_density_detailed_threshold: 20
    first_step_multiplier: 1.2
    final_step_multiplier: 0.8
    high_complexity_multiplier: 1.1
    low_complexity_multiplier: 0.8
    large_expansion_ratio_threshold: 2.0
    large_expansion_strength_limit: 0.8
    min_seam_width: 64
    seam_blur_divisor: 2
    seam_repair_strength: 0.3
    seam_repair_steps: 30
    seam_repair_guidance: 5.0
    seam_repair_max_strength: 0.3
    mask_blur_multiplier: 2
    default_denoising_strength: 0.75
    default_num_inference_steps: 50
    default_guidance_scale: 7.5
    seam_fix_enabled: true
    step_type_default: progressive
    direction_default: both
    fill_color: 255
  tiled_expansion:
    default_tile_size: 1024
    overlap: 256
    blend_width: 256
    vram_safety_ratio: 0.7
    refinement_strength: 0.15
    edge_fix_strength: 0.25
    final_pass_strength: 0.35
    min_tile_size: 512
    max_tile_size: 1536
    tile_overlap: 48
    overlap_ratio: 0.25
    blend_method: mixture_of_diffusers
    progressive_strength_reduction: true
    max_tiles_before_reduction: 50
    refinement_guidance: 6.5
    refinement_steps: 20
    edge_fix_guidance: 7.0
    edge_fix_steps: 30
    final_pass_guidance: 7.0
    final_pass_steps: 40
    min_edge_size_divisor: 2
    blend_size_divisor: 2
    division_epsilon: 1e-8
    tile_size_candidates:
    - 1536
    - 1024
    - 768
    final_pass_mask_value: 255
    tile_sizes:
      large: 1024
      medium: 768
      small: 512
    coordinate_start: 0
  cpu_offload:
    safety_factor: 0.6
    conservative_safety_factor: 0.5
    pipeline_vram: 1024
    gpu_memory_fallback: 512
    aspect_change_threshold: 0.1
    tile_generation_strength: 0.9
    tile_generation_guidance: 7.0
    tile_refinement_strength: 0.3
    tile_refinement_guidance: 7.0
    min_tile_size: 512
    default_tile_size: 512
    max_tile_size: 1536
    min_overlap: 64
    default_overlap: 128
    vram_bytes_per_pixel: 24
    vram_mb_divisor: 1048576
    strategy_overhead_mb: 512
    fallback_vram_mb: 512
    tile_size_rounding: 64
    dimension_rounding: 8
    aspect_adjust_steps: 3
    mask_background_value: 0
    mask_foreground_value: 255
    tile_generation_steps: 25
    tile_refinement_steps: 20
  swpo:
    default_overlap_ratio: 0.8
    default_denoising_strength: 0.75
    unification_strength: 0.15
    window_blur_radius: 30
    edge_blur_ratio: 0.1
    unification_guidance: 7.0
    unification_steps: 30
    default_window_size: 200
    min_window_size: 128
    max_window_size: 512
    default_edge_blur_width: 50
    clear_cache_every_n_windows: 5
    step_thresholds:
      small: 100
      medium: 300
      large: 500
    step_values:
      small: 50
      medium: 60
      large: 70
      xlarge: 80
    guidance_thresholds:
      small: 100
      medium: 300
      large: 500
    guidance_values:
      small: 6.5
      medium: 7.0
      large: 7.5
      xlarge: 8.0
    first_window_strength_multiplier: 1.05
    first_window_strength_max: 0.85
    last_window_strength_multiplier: 0.9
    last_window_strength_min: 0.6
    middle_window_strength_max: 0.75
    overlap_ratio_threshold: 0.5
    overlap_strength_multiplier: 0.95
    kernel_size: 20
    texture_variance_high_threshold: 500
    texture_variance_smooth_threshold: 100
    default_edge_color:
    - 128
    - 128
    - 128
    differential_mask_max_dist: 100
    differential_mask_distance_thresholds:
      near: 20
      medium: 40
    differential_mask_opacity_values:
      high_blend: 0.78
      very_high_blend: 0.9
      full_generation: 1.0
    mask_binary_threshold: 128
    mask_preserve_threshold: 0.1
    mask_generate_threshold: 0.9
    mask_background_value: 0
    mask_foreground_value: 255
    blur_radius_min_percentage: 0.4
    edge_blur_radius_fallback: 50
    vram_channels: 3
    vram_bytes_per_channel: 4
    vram_batch_size: 1
    vram_safety_multiplier: 2.5
    vram_mb_divisor: 1048576
    gradient_size_divisor: 2
    gradient_size_max: 100
    gradient_blur_divisor: 4
    mask_noise_strength: 0.02
    unification_seed_offset: 9999
    edge_width: 10
    dimension_multiple: 8
    mask_conversion_divisor: 255.0
    noise_min_value: 0
    noise_max_value: 255
    noise_strength: 0.02
    edge_erosion_iterations: 0.5
    context_analysis:
      high_frequency_threshold: 0.7
      smooth_threshold: 0.3
  direct_upscale:
    vram_thresholds:
      high: 8000
      medium: 6000
      low: 4000
    scale_thresholds:
      low: 2.0
      medium: 3.0
    default_model: RealESRGAN_x4plus
    default_tile_size: 0
    default_tile_pad: 10
    model_scales:
      RealESRGAN_x4plus: 4
      RealESRGAN_x2plus: 2
    model_selection:
      fast: RealESRGAN_x2plus
      default: RealESRGAN_x4plus
    use_fp32: true
    tile_sizes:
      high_vram: 2048
      medium_vram: 1024
      low_vram: 512
    esrgan_scales:
      low: 2
      medium: 3
      high: 4
    initial_passes: 1
    initial_scale: 1.0
    initial_pass_num: 0
    timestamp_multiplier: 1000
    scale_threshold: 3
    default_scale_factor: 2
  controlnet_progressive:
    default_strength: 0.25
    conditioning_scale: 0.5
    control_guidance_start: 0.0
    control_guidance_end: 1.0
    vram_priority: 4
    canvas_centering_divisor: 2
    canvas_background_color: white
    mask_inpaint_value: 255
    mask_keep_value: 0
    strength_fallback: 0.95
    control_types_requiring_extraction:
    - canny
    - blur
    - depth
    - normal
  hybrid_adaptive:
    aspect_ratio_threshold: 1.5
    extreme_ratio_threshold: 3.0
    vram_safety_factor: 0.8
    simple_aspect_change_threshold: 0.1
    simple_scale_difference_threshold: 0.1
    additional_upscale_threshold: 1.1
    extreme_scale_threshold: 4
    quality_estimates:
      simple: 0.9
      progressive: 0.85
      swpo: 0.85
      cpu_fallback: 0.7
      tiled_high: 0.85
      tiled_low: 0.8
      final: 0.9
    vram_estimates:
      minimal: 1024
      cpu_fallback: 512
    config_overrides:
      max_expansion_ratio: 1.3
      small_tile_size: 384
      small_overlap: 64
    swpo_thresholds:
      extreme_ratio: 5
      window_size_large: 300
      window_size_normal: 200
      overlap_high: 0.85
      overlap_normal: 0.8
  base:
    vram_buffer_multiplier: 1.2
    temp_file_retention: 5
    timestamp_multiplier: 1000
  strategy_selector:
    aspect_tolerance: 1.1
    massive_expansion_multiplier: 4
    default_priority: 50
processing_params:
  seam_repair:
    base_strength: 0.3
    num_inference_steps: 30
    guidance_scale: 5.0
    max_strength: 0.3
    mask_blur_multiplier: 2
  quality_repair:
    strength: 0.5
    num_inference_steps: 40
    guidance_scale: 7.0
  artifact_removal:
    strength: 0.4
    num_inference_steps: 35
    guidance_scale: 6.0
processors:
  artifact_detector:
    seam_threshold: 0.25
    color_threshold: 30
    gradient_threshold: 0.25
    frequency_threshold: 0.35
    texture_threshold: 0.15
    min_quality_score: 0.75
    edge_sensitivity: 0.8
    gradient_deviation_allowed: 0.1
    enabled_checks:
    - seam
    - color
    - gradient
    - frequency
    - texture
    weights:
      seam: 0.3
      color: 0.2
      gradient: 0.2
      frequency: 0.2
      texture: 0.1
    skip_validation_score: 1.0
    artifact_percentage_multiplier: 100
    orientation_vertical: 1.5707963267948966
    critical_severity_threshold: 5.0
    color_sample_window: 5
    color_normalization_divisor: 255.0
    boundary_sample_width: 2
    fft_magnitude_offset: 1
    center_divisor: 2
    frequency_window_divisor: 4
    high_freq_epsilon: 1e-6
    frequency_score_max: 1.0
    pattern_shifts:
    - 64
    - 128
    - 256
    pattern_shift_min_divisor: 2
    expected_diff_divisor: 255
    pattern_score_divisor: 255.0
    pattern_score_fallback: 0.0
    quality_preset_multipliers:
      ultra: 0.5
      high: 0.7
      balanced: 1.0
      fast: 1.5
    score_weights:
      color: 0.3
      gradient: 0.3
      frequency: 0.2
      pattern: 0.2
    seam_penalty_multiplier: 0.2
    seam_penalty_max: 1.0
    severity_thresholds:
      none_max: 0.1
      low_max: 0.3
      medium_max: 0.5
      high_max: 0.7
    artifact_mask_dilation: 10
    boundary_mask_width: 5
    detection_score_threshold: 0.5
    denoising_strength_recommendation: 0.9
  artifact_removal:
    max_detection_resolution: 4096
    scale_min: 1.0
    boundary_margin: 10
    color_sample_region_size: 20
    color_difference_threshold: 10
    color_diff_norm_divisor: 50
    boundary_mask_width: 5
    color_detection_weight: 0.4
    gradient_detection_weight: 0.3
    frequency_detection_weight: 0.3
    combined_mask_threshold: 0.1
    gradient_boundary_check_width: 2
    gradient_spike_multiplier: 2
    gradient_mask_value: 0.8
    gradient_mask_width: 5
    frequency_location_scale: 0.1
    magnitude_spectrum_multiplier: 1.5
    frequency_mask_width: 10
    frequency_mask_value: 0.5
    fft_epsilon: 1
    tile_boundary_width: 3
    tile_mask_value: 0.6
    canny_threshold_low: 50
    canny_threshold_high: 150
    hough_rho: 1
    hough_theta_divisor: 180
    hough_threshold: 100
    hough_min_line_length: 100
    hough_max_line_gap: 10
    hough_line_thickness: 5
    hough_line_mask_value: 0.4
  edge_analysis:
    edge_detection_sensitivity: 0.1
    seam_detection_sensitivity: 0.3
    artifact_detection_sensitivity: 0.5
    edge_threshold_hough: 100
    canny_low_threshold: 50
    canny_high_threshold: 150
    edge_normalization_divisor: 255.0
    boundary_check_width: 5
    boundary_position_offset: 2
    vertical_orientation: 1.5707963267948966
    horizontal_orientation: 0
    hough_rho: 1
    hough_theta_divisor: 180
    min_line_length_divisor: 4
    max_line_gap: 10
    suspicious_line_length_ratio: 0.3
    angle_tolerance_degrees: 5
    straight_angle_threshold: 175
    right_angle: 90
    artifact_edge_strength: 0.8
    artifact_confidence: 0.7
    pattern_box_size: 64
    pattern_step_size: 32
    pattern_variance_threshold: 100
    pattern_edge_strength: 0.5
    pattern_confidence: 0.5
    perfect_quality_score: 1.0
    seam_impact_multiplier: 0.2
    artifact_impact_multiplier: 0.1
    normalization_pixels: 1000000
    quality_score_min: 0.0
    quality_score_max: 1.0
    color_sample_width: 5
    default_color_threshold: 30.0
    seam_thickness_multiplier: 2
  boundary_analysis:
    initial_quality_score: 1.0
    min_quality_score: 0.0
    critical_penalty: 0.2
    high_penalty: 0.1
    medium_penalty: 0.05
    boundary_margin: 10
    strip_width: 5
    color_diff_thresholds:
      high: 40
      medium: 20
      low: 10
    texture_diff_thresholds:
      high: 30
      medium: 15
      low: 7
    severity_values:
      low: 0.3
      medium: 0.6
      high: 0.9
      critical: 1.0
      default: 0.5
    gradient_falloff_distance: 10
    max_issues_before_strategy_recommendation: 5
    avg_color_diff_ultra_threshold: 25
    rgb_max_value: 255
    severity_color_thresholds:
      green_max: 0.3
      yellow_max: 0.6
    severity_colors:
      green:
      - 0
      - 255
      - 0
      yellow:
      - 255
      - 255
      - 0
      red:
      - 255
      - 0
      - 0
    edge_sample_size: 50
    color_similarity_threshold: 0.9
    pattern_match_threshold: 0.8
  seam_repair:
    mask_expansion_pixels: 10
    mask_blur_radius: 5
    blend_mask_expansion: 20
    smooth_blend_expansion: 15
    blend_mask_blur_radius: 10
    final_blur_radius: 3
    seam_repair_strength: 0.9
    seam_repair_guidance: 7.5
    seam_repair_steps: 30
    base_blur_strength: 0.3
    artifact_repair_strength: 0.7
    artifact_repair_guidance: 7.0
    artifact_repair_steps: 25
    final_blend_strength: 0.5
    final_blend_guidance: 6.5
    final_blend_steps: 20
    png_compress_level: 0
    mask_conversion_max: 255
    rgb_channels: 3
    mask_binary_threshold: 0.5
    seam_identification_threshold: 0.1
    median_filter_size: 5
    expansion_multiplier: 2
    expansion_offset: 1
    default_smooth_sigma: 5.0
    default_expand_pixels: 10
  controlnet_extractors:
    canny:
      default_low_threshold: 100
      default_high_threshold: 200
      low_threshold_min: 0
      low_threshold_max: 255
      high_threshold_min: 0
      high_threshold_max: 255
      kernel_size: 3
      dilation_iterations: 1
    blur:
      valid_types:
      - gaussian
      - box
      - motion
      default_radius: 5
      motion_kernel_multiplier: 2
      motion_kernel_offset: 1
    depth:
      model_id: Intel/dpt-large
      normalize: true
      invert: false
    resampling:
      method: LANCZOS
    motion_blur_min_radius: 2
    depth_blur_radius: 20
    rgb_channels: 3
    invert_max_value: 255
  tiled_processor:
    default_tile_size: 512
    default_overlap: 64
    min_tile_size: 256
    default_blend_mode: gaussian
    alpha_max: 255
    alpha_min: 0
    debug_colors:
    - - 255
      - 0
      - 0
    - - 0
      - 255
      - 0
    - - 0
      - 0
      - 255
    - - 255
      - 255
      - 0
    - - 255
      - 0
      - 255
    - - 0
      - 255
      - 255
    debug_background_color:
    - 255
    - 255
    - 255
    debug_boundary_width: 2
    debug_content_width: 1
    debug_text_offset: 5
  quality_orchestrator:
    quality_threshold: 0.85
    max_refinement_passes: 3
    auto_fix_threshold: 0.7
    initial_quality_score: 0.0
    default_quality_score: 1.0
    quality_score_min: 0.0
    quality_score_max: 1.0
    default_denoising_strength: 0.9
    default_step: 0
    severity_penalties:
      none: 0.0
      low: 0.05
      medium: 0.15
      high: 0.3
      critical: 0.5
    default_severity_penalty: 0.2
    method_score_penalty_multiplier: 0.1
  quality_validator:
    min_quality_score: 0.7
    max_retries: 3
    retry_delay: 1.0
    initial_score: 1.0
    score_min: 0.0
    score_max: 1.0
    seam_penalty_per_seam: 0.1
    seam_penalty_max_reduction: 0.5
    severity_penalties:
      critical: 0.3
      high: 0.2
      medium: 0.1
      low: 0.05
      none: 0.0
    mask_coverage_multiplier: 0.3
    mask_coverage_max_reduction: 0.3
  smart_refiner:
    default_max_iterations: 3
    default_quality_threshold: 0.85
    base_strength: 0.4
    strength_multiplier: 1.5
    min_region_size: 32
    large_boundary_blur: 32
    medium_boundary_blur: 16
    small_boundary_blur: 24
    refinement_steps: 30
    refinement_guidance: 7.5
    region_expansion_divisor: 2
    max_strength_seam: 0.9
    max_strength_pattern: 0.7
    max_strength_other: 0.6
    mask_initial_value: 0
    mask_fill_value: 255
    inner_margin_divisor: 2
    percentage_multiplier: 100
vram_strategies:
  fallback_chain:
    1: tiled_large
    2: tiled_medium
    3: tiled_small
    4: cpu_offload
vram:
  thresholds:
    tiled_processing: 4000
    minimum: 2000
    critical: 1000
  buffer_mb: 512
  safety_factor: 0.9
  measurement_retries: 3
  measurement_delay: 0.5
  image_channels: 3
  bytes_per_pixel: 4
  default_batch_size: 1
  estimation_safety_factor: 2.5
  min_dimension_size: 384
  max_dimension_size: 2048
  vae_downscale_factor: 8
  activation_multiplier: 2
  estimation:
    latent_multiplier: 4.5
  offloading:
    enable_sequential: true
  model_requirements:
    sd15: 4000
    sd2: 6000
    sdxl: 10000
    sd3: 16000
    flux: 24000
    default: 8000
  operation_multipliers:
    generate: 1.0
    img2img: 1.2
    inpaint: 1.5
    upscale: 0.8
    default: 1.0
  pixel_overhead_mb_per_megapixel: 4
  estimation_safety_margin: 1.2
  model_memory_per_megapixel:
    sdxl: 150
    sd15: 100
    sd2: 120
    flux: 200
    unknown: 150
  tile_size_step: 256
  min_overlap: 128
  attention_multiplier: 4
  memory_profiles:
    low:
      threshold_mb: 4000
      settings:
        enable_attention_slicing: true
        enable_vae_slicing: true
        enable_cpu_offload: true
        sequential_cpu_offload: true
        batch_size: 1
        tile_size: 512
    medium:
      threshold_mb: 8000
      settings:
        enable_attention_slicing: true
        enable_vae_slicing: true
        enable_cpu_offload: false
        batch_size: 1
        tile_size: 768
    high:
      settings:
        enable_attention_slicing: false
        enable_vae_slicing: false
        enable_cpu_offload: false
        batch_size: 2
        tile_size: 1024
models:
  default_type: "sdxl"
  default_dtype: "float16"
  sdxl:
    min_resolution: 1024
    max_resolution: 4096
    optimal_resolution: 1344
    resolution_step: 8
  sd15:
    min_resolution: 512
    max_resolution: 2048
    optimal_resolution: 768
    resolution_step: 8
  size_estimates:
    sdxl: 7516192768
    flux: 16106127360
    default: 5368709120
  patterns:
    sd3:
    - stable-diffusion-3
    - sd3
    - sd-3
    flux:
    - flux
    sdxl:
    - sdxl
    - xl
  optimal_resolutions:
    sdxl:
    - 1024
    - 1024
    sd15:
    - 512
    - 512
    sd3:
    - 1024
    - 1024
    flux:
    - 1024
    - 1024
    sd2:
    - 768
    - 768
  resolution_constraints:
    multiple: 16
    max_dimension: 4096
    min_dimension: 512
paths:
  cache_dir: ~/.cache/expandor
  output_dir: ./output
  temp_dir: /tmp/expandor
  log_dir: ~/.local/share/expandor/logs
  config_dir: ~/.config/expandor
  binary_dir: ~/bin
  realesrgan_path: null
output:
  default_format: png
  default_extension: .png
  formats:
    png:
      compression: 0
      optimize: false
    jpeg:
      quality: 95
      optimize: true
      progressive: true
    webp:
      quality: 95
      lossless: false
      method: 6
  metadata:
    save_generation_params: true
    save_expandor_version: true
    save_timestamp: true
    timestamp_precision: 1000
    operation_id_multiplier: 1000
  compression:
    png_level: 0
    jpeg_quality: 95
  watermark:
    height: 40
    width: 120
    position_x: 10
    position_y: 10
    end_x: 110
    end_y: 30
    brightness_boost: 100
processing:
  max_threads: 4
  batch_size: 1
  enable_progress_bar: true
  verbose_logging: false
  verbose: false
  save_intermediate_stages: false
  save_stages: false
  stage_format: png
  dimension_rounding: 8
  rgb_max_value: 255.0
  rgb_channels: 3
  image_mode: RGB
  mask_mode: L
  canvas_background_color: black
  mask_background_color: white
  temp_cleanup_patterns:
  - progressive/*.png
  - tiles/*.png
  - upscale/*.png
  - masks/*.png
  artifact_removal:
    boundary_width_multiplier: 3
    gradient_threshold: 0.5
    sobel_kernel: 3
  seam_repair:
    min_repair_steps: 10
    min_repair_strength: 0.2
    strength_reduction_factor: 0.6
    steps_reduction_factor: 0.5
  edge_analysis:
    direction_default: vertical
    position_default: 0
    seam_impact_initial: 0.0
    artifact_impact_initial: 0.0
  boundary_tracking:
    method_default: unknown
    progressive_method: progressive
    default_padding: 10
adapters:
  common:
    default_width: 1024
    default_height: 1024
    default_num_inference_steps: 50
    default_guidance_scale: 7.5
    default_strength: 0.8
    default_inpaint_strength: 0.8
    default_refiner_strength: 0.3
    default_negative_prompt: null
    default_seed: null
    default_scale_factor: 2
    default_controlnet_conditioning_scale: 1.0
  mock:
    default_device: cpu
    default_dtype: fp32
  diffusers:
    default_device: cuda
    default_torch_dtype: float16
    default_variant: fp16
    default_use_safetensors: true
    default_enable_xformers: true
    lora_default_weight: 1.0
    controlnet_default_conditioning_scale: 1.0
  a1111:
    api_endpoint: http://localhost:7860
    default_sampler: Euler a
    default_cfg_scale: 7.5
    default_steps: 50
    default_width: 1024
    default_height: 1024
    default_denoising_strength: 0.8
    min_dimension: 512
    dimension_multiple: 64
    vram_estimates:
      generate: 4500
      inpaint: 4000
      img2img: 3500
      enhance: 2000
      default: 4000
  comfyui:
    api_endpoint: http://localhost:8188
    default_checkpoint: null
    default_sampler: euler
    default_scheduler: normal
    default_steps: 50
    default_cfg: 7.5
    default_denoise: 0.8
    default_width: 1024
    default_height: 1024
    min_dimension: 512
    dimension_multiple: 8
    default_vram_estimate: 4000
image_processing:
  artifact_detection:
    min_quality_score: 0.75
    seam_threshold: 0.25
    color_threshold: 30
    gradient_threshold: 0.25
    frequency_threshold: 0.35
    gradient_deviation_allowed: 0.1
    severe_artifact_penalty: 0.2
    moderate_artifact_penalty: 0.1
    minor_artifact_penalty: 0.05
  boundary_analysis:
    visual_margin: 10
  tiled_processing:
    debug_rect_width: 2
    center_rect_width: 1
  image_utils:
    fade_start: 0.0
    edge_sampling_width: 1
  lora:
    base_inference_steps: 50
    max_inference_steps: 100
    type_steps:
      detail: 10
      quality: 10
      style: 5
      character: 5
      subject: 5
      artifact_removal: 15
      default: 0
    type_priority:
      detail: 1
      quality: 2
      style: 3
      character: 4
      subject: 5
      artifact_removal: 0
      default: 999
    noise_scale: 0.1
    noise_octaves: 1
    octave_frequency_base: 2
    octave_amplitude_base: 0.5
    mask_fill_color: 255
  strategy_selection:
    simple_upscale_threshold: 1.5
    progressive_threshold: 4.0
    default_strategy_priority: 50
    aspect_ratio_extreme_threshold: 2.0
    expansion_extreme_threshold: 3.0
    vram_high_threshold: 16000
    vram_medium_threshold: 12000
    vram_low_threshold: 6000
    vram_very_low_threshold: 4000
    expansion_small_threshold: 1.5
    expansion_moderate_threshold: 4.0
  dimension_calculation:
    dimension_multiple: 8
    max_expansion_per_step: 2.0
    expansion_threshold: 2.0
    initial_step_number: 2
    default_window_size: 200
    default_overlap_ratio: 0.8
  memory_params:
    memory_safety_factor: 1.2
    batch_size_safety_factor: 0.8
    gradient_memory_multiplier: 2
    activation_multiplier_with_grad: 4
    activation_multiplier_no_grad: 2
    bytes_per_pixel: 12
    tile_overlap: 64
    min_tile_size: 256
    max_tile_size: 2048
  vram_management:
    min_dimension_size: 384
    max_dimension_size: 2048
  lora_management:
    default_weight: 1.0
    weight_scale_factor: 1.5
  color:
    max_rgb_value: 255.0
    channels: 3
    noise_epsilon: 1e-08
  generation:
    default_width: 1024
    default_height: 1024
    num_inference_steps: 50
    guidance_scale: 7.5
    strength: 0.8
    negative_prompt: ''
    controlnet_conditioning_scale: 1.0
  blur:
    gaussian_divisor: 4
    radius_divisor: 4
    center_divisor: 2.0
  noise:
    perlin_scale: 0.1
    perlin_octaves: 1
    strength_multiplier: 10
    enhancement_factor: 1.2
    octave_frequency_base: 2
    octave_amplitude_base: 0.5
  edge_detection:
    sobel_kernel_size: 3
    canny_kernel_size: 3
    dilation_default: 5
    gradient_l2: false
    dilate_default: true
  masks:
    threshold: 128
    feather_default: 0
    binary_threshold: 128
    max_value: 255
    min_value: 0
memory:
  bytes_to_mb_divisor: 1048576
  bytes_to_gb_divisor: 1073741824
  vram:
    safety_factors:
      default: 0.8
      conservative: 1.1
      aggressive: 0.7
    dtype_memory:
      float16: 2
      bfloat16: 2
      float32: 4
      int32: 4
    model_estimates:
      sdxl:
        generate: 6000
        inpaint: 5500
        img2img: 5000
        refine: 4000
        enhance: 3500
        controlnet_generate: 8500
        controlnet_inpaint: 8000
        controlnet_img2img: 7500
      sd15:
        generate: 8000
        inpaint: 7500
        img2img: 7000
        refine: 5000
        enhance: 4500
        controlnet_generate: 10500
        controlnet_inpaint: 10000
        controlnet_img2img: 9500
      flux:
        generate: 12000
        inpaint: 11000
        img2img: 10000
        refine: 8000
        enhance: 7000
        controlnet_generate: 14500
        controlnet_inpaint: 14000
        controlnet_img2img: 13500
      sd3:
        generate: 3000
        inpaint: 2800
        img2img: 2500
        refine: 2000
        enhance: 1800
        controlnet_generate: 4500
        controlnet_inpaint: 4300
        controlnet_img2img: 4000
      sd2:
        generate: 4000
        inpaint: 3800
        img2img: 3500
        refine: 2500
        enhance: 2300
        controlnet_generate: 5500
        controlnet_inpaint: 5300
        controlnet_img2img: 5000
    overhead:
      per_megapixel: 150
      batch_size_multiplier: 0.8
      lora_overhead: 200
      pixel_overhead_per_megapixel: 4.5
      latent_multiplier: 4
      megapixel_divisor: 1000000
    controlnet:
      model_load: 2000
      operation_active: 1500
    tiling:
      bytes_per_pixel: 12
      overlap: 64
      min_tile: 256
      max_tile: 2048
      divisible_by: 64
      tile_alignment: 16
      min_overlap_ratio: 0.25
  cpu:
    min_ram_gb: 16
    disk_space_gb: 50
    batch_limits:
      max_batch_size: 16
      safety_factor: 0.8
dimensions:
  presets:
    720p:
    - 1280
    - 720
    1080p:
    - 1920
    - 1080
    1440p:
    - 2560
    - 1440
    4K:
    - 3840
    - 2160
    5K:
    - 5120
    - 2880
    8K:
    - 7680
    - 4320
    ultrawide_1440p:
    - 3440
    - 1440
    ultrawide_4K:
    - 5120
    - 2160
    super_ultrawide:
    - 5760
    - 1080
    portrait_4K:
    - 2160
    - 3840
    square_4K:
    - 2880
    - 2880
    iphone:
    - 1170
    - 2532
    ipad:
    - 2048
    - 2732
    android:
    - 1440
    - 3200
    '16:9':
    - 1920
    - 1080
    '21:9':
    - 2560
    - 1080
    '32:9':
    - 3840
    - 1080
    '9:16':
    - 1080
    - 1920
  sdxl_resolutions:
  - - 1024
    - 1024
  - - 1152
    - 896
  - - 1216
    - 832
  - - 1344
    - 768
  - - 1536
    - 640
  - - 768
    - 1344
  - - 896
    - 1152
  - - 640
    - 1536
  constraints:
    divisible_by: 16
    max_dimension: 65536
    min_dimension: 512
    optimal_pixels: 1048576
  progressive:
    max_expansion_per_step: 2.0
    aspect_tolerance: 0.05
    max_aspect_change_ratio: 8.0
    target_completion_threshold: 0.95
    expansion_step_multiplier: 1.5
    max_steps: 10
  swpo:
    default_window_size: 200
    default_overlap_ratio: 0.8
    min_overlap_ratio: 0.7
    max_overlap_ratio: 0.85
quality:
  presets:
    ultra:
      inference_steps: 80
      cfg_scale: 7.5
      denoise_strength: 0.95
      blur_radius: 300
    high:
      inference_steps: 60
      cfg_scale: 7.0
      denoise_strength: 0.9
      blur_radius: 200
    balanced:
      inference_steps: 40
      cfg_scale: 6.5
      denoise_strength: 0.85
      blur_radius: 150
    fast:
      inference_steps: 25
      cfg_scale: 6.0
      denoise_strength: 0.8
      blur_radius: 100
  validation:
    default_quality_score: 1.0
    quality_threshold: 0.1
    severity_penalties:
      none: 0.0
      low: 0.1
      medium: 0.3
      high: 0.5
      critical: 0.8
    artifact_detection:
      score_threshold: 0.5
      critical_percentage: 5.0
      detection_level: aggressive
    score_weights:
      color: 0.3
      gradient: 0.3
      frequency: 0.25
      pattern: 0.15
  preset_multipliers:
    ultra: 1.2
    high: 1.0
    balanced: 0.8
    fast: 0.6
controlnet:
  extractors:
    canny:
      default_low_threshold: 100
      default_high_threshold: 200
      aperture_size: 3
      l2_gradient: false
      dilate: true
      kernel_size: 3
    blur:
      default_radius: 5
      blur_type: gaussian
    depth:
      enabled: false
  models:
    canny: lllyasviel/sd-controlnet-canny
    depth: lllyasviel/sd-controlnet-depth
    openpose: lllyasviel/sd-controlnet-openpose
  pipelines:
    extract_at_each_step: true
    conditioning_scale: 1.0
    guidance_start: 0.0
    guidance_end: 1.0
cli:
  formatting:
    separator_width: 60
    short_separator_width: 50
    prompt_truncation: 50
    yaml_width: 120
    config_width: 80
  progress:
    cache_clear_frequency: 5
    status_report_interval: 5
  setup:
    vram_limits:
      min: 1024
      max: 49152
    lora_weight_limits:
      min: 0.1
      max: 2.0
      default: 1.0
    lora_weight_sum_limit: 1.5
    lora_weight_scale_factor: 1.5
system:
  python:
    min_major: 3
    min_minor: 8
  hardware:
    min_ram_gb: 16
    min_disk_space_gb: 50
    min_strategies: 4
  simulation:
    mock_vram_24gb: 24576
    vram_reduction_factor: 0.7
    operation_cost: 1000
batch:
  seed:
    hash_modulus: 4294967296
    random_seed_range: 1000
  error_codes:
    success: 0
    config_error: 3
    processing_error: 4
    validation_error: 5
    adapter_error: 6
    general_error: 130
experimental:
  hybrid_adaptive:
    enabled: false
    extreme_ratio_thresholds:
    - 4
    - 5
    quality_fallback: 0.7
    vram_minimal: 512
  advanced:
    frequency_analysis: true
    pattern_detection: true
    adaptive_quality: false
debug:
  save_stages: false
  save_tiles: false
  verbose: false
  cleanup:
    keep_temp_files: 5
    clear_cache_aggressive: false
  mock:
    color_ranges:
      red_min: 50
      red_max: 100
      green_min: 100
      green_max: 200
      blue_min: 100
      blue_max: 150
    noise_scale: 0.05
    enhancement_factor: 1.2
metadata:
  version: '1.0'
  total_values_configured: 979
  categories: 13
  description: Comprehensive configuration capturing all hardcoded values in Expandor
    codebase
  generated_date: '2025-01-27'
  source_analysis: hardcoded_values_report.json
migration:
  legacy_mappings:
    old_quality_threshold: quality.validation.quality_threshold
    old_vram_safety: memory.vram.safety_factors.default
    old_tile_size: memory.vram.tiling.max_tile
  default_updates:
    output.formats.jpeg.quality: 95
    vram.estimation.latent_multiplier: 4.5
